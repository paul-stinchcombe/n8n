{"createdAt":"2025-11-21T02:53:47.879Z","updatedAt":"2025-11-21T04:44:54.000Z","id":"ST9lgRWk9mjro8Ok","name":"Vital Strategies Production","active":false,"isArchived":false,"nodes":[{"parameters":{"triggerOn":"folder","path":"/Users/paul/pcs_n8n","events":["add","change"],"options":{"awaitWriteFinish":true,"usePolling":true}},"type":"n8n-nodes-base.localFileTrigger","typeVersion":1,"position":[-816,64],"id":"359143a3-194e-4788-aff4-3993ff77d30a","name":"Local File Trigger"},{"parameters":{"fileSelector":"={{ $json.path }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-592,64],"id":"2e09c7a4-e54c-40bf-ad47-828e3ec60d12","name":"Read/Write Files from Disk","retryOnFail":true,"alwaysOutputData":false,"maxTries":5},{"parameters":{"promptType":"define","text":"={{ $json.content }}","hasOutputParser":true,"messages":{"messageValues":[{"message":"You are able to extract specific information from a Malay language input.  The information is|- lokasi kejadian (as an array)- kenderaan terlibat- tarikh dan waktu report.\nThere may be multiple reports in the document each separated by a line containing: \"Assalamualaikum dan Salam sejahtera\".  If there are multiple reports, separate in to an array of individual outputs, 1 per report."}]},"batching":{}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.7,"position":[112,64],"id":"4acdb25a-bf79-438a-a040-534f4cb425a1","name":"Basic LLM Chain"},{"parameters":{"jsonSchemaExample":"{\n    \"nombor report\": \"12345/21\",\n    \"jenis jalan\": \"road\",\n    \"jenis permukaan\":\"surface\",\n    \"qualiti permukaan\": \"unknown\",\n    \"klasifikasi kes\":\"SEK 99(0) APJ 1990\",\n  \"sistem lalulintas\":\"sehala\",\n\t\"kenderaan\": [{\n      \"Label\": \"K1\",\n      \"No. Pend\":\"VPA6479\",\n      \"jenis\":\"Ford Ranger\",\n      \"warna\":\"biru\",\n      \"LKM\": \"2025-7-1\"\n    }],\n    \"butiran individu terlibat\": [\n      {\n        \"kendaraan\":\"K1\",\n        \"umur\":\"28\",\n        \"jantina\":\"unknown\",\n        \"keturunan\":\"Melayu\",\n        \"lesen\":\"B/D 2023-5-1\",\n        \"pekerjaan\":\"Plowman\",\n        \"kecederaan\":\"Mati\",\n        \"sebab mati\":\"hammer\"\n      }\n    ],\n    \"lokasi\": \"Los Angeles\",\n    \"tarikh report\":\"2025-7-1\",\n    \"waktu report\":\"2359hrs\",\n    \"keterangan kes\":\"report\",\n    \"tarikh kejadian\":\"2025-7-1\",\n    \"waktu kejadian\": \"2359hrs\"\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[208,288],"id":"3925f14b-23ea-4739-886e-7953da765ada","name":"Structured Output Parser"},{"parameters":{"modelName":"models/gemini-2.0-flash-exp","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[288,496],"id":"b1311143-2fd0-4da3-8965-38407a4d465b","name":"Google Gemini Chat Model1","credentials":{"googlePalmApi":{"id":"bIkZPsIBap8l9xrb","name":"Google Gemini(PaLM) Api account 2"}}},{"parameters":{"operation":"toJson","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[576,64],"id":"923ec2d4-7d22-479a-94c7-f2b80a6c07a5","name":"Convert to File"},{"parameters":{"operation":"write","fileName":"=userdata/vs/report-{{ $('Basic LLM Chain').item.json.output['nombor report'].replace(/\\//g,'-') }}.json","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[800,64],"id":"fdb74e1b-d3f2-4c25-8801-2dd59d912ceb","name":"Read/Write Files from Disk1"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.fileType }}","rightValue":"pdf","operator":{"type":"string","operation":"equals"},"id":"a078e3eb-d679-433a-b4e3-688aeef38a98"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"c3d275e3-5d2f-49ba-a554-6deb5d531318","leftValue":"={{ $json.fileType }}","rightValue":"xlsx","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-368,64],"id":"ac6443ab-adf5-4830-89d4-058e272c7bb0","name":"Switch"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatDeepSeek","typeVersion":1,"position":[80,288],"id":"939b923a-b387-414c-a83e-a38b37469ebe","name":"DeepSeek Chat Model","credentials":{"deepSeekApi":{"id":"kjsLLud72Mv0JDPq","name":"DeepSeek account"}}},{"parameters":{"operation":"pdf","options":{"joinPages":true}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-144,-32],"id":"e15afefc-e9d5-4610-a1dc-b76dd440a637","name":"Extract from PDF","alwaysOutputData":true,"retryOnFail":true,"maxTries":5},{"parameters":{"operation":"xlsx","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-144,160],"id":"df497645-c349-41d6-ac8b-011ae9509ec6","name":"Extract from Excel","alwaysOutputData":true,"retryOnFail":true,"maxTries":5},{"parameters":{"operation":"get","documentURL":"1_qRp5EuFdQNEI3MIy4kd_6Meio7P01kjRU58zoVHzZM"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[-144,384],"id":"3531482a-1df5-4333-b23b-c011aecda665","name":"Get a document","credentials":{"googleDocsOAuth2Api":{"id":"uCqJnT2ZBbOujfBb","name":"Google Docs account"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-368,384],"id":"23f2f858-65ba-4469-a640-7f65035144fd","name":"When clicking ‘Execute workflow’"}],"connections":{"Local File Trigger":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Basic LLM Chain":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Basic LLM Chain","type":"ai_outputParser","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Convert to File":{"main":[[{"node":"Read/Write Files from Disk1","type":"main","index":0}]]},"Switch":{"main":[[{"node":"Extract from PDF","type":"main","index":0}],[{"node":"Extract from Excel","type":"main","index":0}]]},"DeepSeek Chat Model":{"ai_languageModel":[[{"node":"Basic LLM Chain","type":"ai_languageModel","index":0}]]},"Extract from PDF":{"main":[[{"node":"Basic LLM Chain","type":"main","index":0}]]},"Extract from Excel":{"main":[[{"node":"Basic LLM Chain","type":"main","index":0}]]},"When clicking ‘Execute workflow’":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"Get a document":{"main":[[{"node":"Basic LLM Chain","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"27cae849-fbcc-4d8c-80e2-d1832134e6aa","triggerCount":0,"shared":[{"createdAt":"2025-11-21T02:53:47.885Z","updatedAt":"2025-11-21T02:53:47.885Z","role":"workflow:owner","workflowId":"ST9lgRWk9mjro8Ok","projectId":"FvxAVPRgShLcnSOU"}],"tags":[]}