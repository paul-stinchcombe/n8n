{"createdAt":"2025-06-19T08:18:24.387Z","updatedAt":"2025-08-28T02:39:54.000Z","id":"LP6fvqF8FhtnQCQM","name":"Ocunapse Web Bot","active":true,"isArchived":false,"nodes":[{"parameters":{"public":true,"initialMessages":"Hi there! ðŸ‘‹\nMy name is Bethan from Ocunapse. How can I assist you today?","options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-208,112],"id":"9e48ca87-6d85-4d94-8896-b1013648f677","name":"When chat message received","webhookId":"1f9bdd6d-3200-4b7b-bdb1-1413b7051174"},{"parameters":{"options":{"systemMessage":"You are a helpful Gen-Alpha, female assistant called Bethan, giving information about Ocunapse with the goal of creating a qualified sales lead.  Use the tools to get information about Ocunapse.\n\nSend images when appropriate.\n\nDuring the chat try to gain information about the user to qualify them as a sales lead.  The information should include:\n - Their first name.\n - Their company name.\n - Their contact information such as email or phone number.\n - Their job title or role (optional).\n - Specific area of interest.\n - Timeline.\n - Budget.\nKeep the chat going until you have all the questions non-optional answered. \n\nOnce you have all the required answers use the tool to send an email.\n\nBe very conversational and informal in your approach.  Ask them questions when appropriate to get information. \n\nBe brief with you responses whenever possible.\n\nDon't answer questions that do not concern Ocunapse.\n\nSpeak as if you are a sales person.","maxIterations":10,"returnIntermediateSteps":false}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[368,80],"id":"3918eee8-449a-47f4-8694-a66b559efaaf","name":"AI Agent"},{"parameters":{"mode":"retrieve-as-tool","toolName":"vectordb","toolDescription":"Work with ocunapse data from a pgvector db","options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.1,"position":[480,304],"id":"a9a2506d-78c7-4997-b4dd-cc7741223787","name":"Postgres PGVector Store","credentials":{"postgres":{"id":"P3RFSa3bOoBOMjdF","name":"Ocunapse RAG"}}},{"parameters":{"modelName":"models/embedding-001"},"type":"@n8n/n8n-nodes-langchain.embeddingsGoogleGemini","typeVersion":1,"position":[576,512],"id":"2b461648-c17e-4d18-8c7b-5543139015a8","name":"Embeddings Google Gemini","credentials":{"googlePalmApi":{"id":"06fjQHyU4iIkhwT3","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('When chat message received').item.json.sessionId }}","contextWindowLength":10},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[352,304],"id":"c5b46c58-01f6-4022-9e69-844324ae5b56","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"P3RFSa3bOoBOMjdF","name":"Ocunapse RAG"}}},{"parameters":{"description":"Call this tool when you have collected all of the answers to the qualifying questions.  The query data must be an object containing the following structure:\n{name: string, company: string, contact: string, budget: string, interest: string, role: string, timeline: string}\nYou can fill out the data using the qualifying data you have collected.","workflowId":{"__rl":true,"value":"Af1reQDatoOTfwV3","mode":"list","cachedResultName":"Send Sales Lead Email"},"workflowInputs":{"mappingMode":"defineBelow","value":{"query":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}"},"matchingColumns":["query"],"schema":[{"id":"query","displayName":"query","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[800,304],"id":"8ae912a6-c2e6-4c9f-b6eb-226aae936820","name":"Call n8n Workflow Tool","notesInFlow":true,"notes":"Send Email"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatDeepSeek","typeVersion":1,"position":[224,304],"id":"86f2beaf-9871-4b9a-b5d9-3a5fa089a848","name":"DeepSeek Chat Model","credentials":{"deepSeekApi":{"id":"kjsLLud72Mv0JDPq","name":"DeepSeek account"}}},{"parameters":{"endpointUrl":"https://kami-mcp.ocu-napse.com/mcp","serverTransport":"httpStreamable","include":"selected","includeTools":["listNFTs","login"],"options":{"timeout":60000}},"type":"@n8n/n8n-nodes-langchain.mcpClientTool","typeVersion":1.1,"position":[672,-112],"id":"dd675420-8c74-4218-8b5a-a676e6812490","name":"MCP Client"},{"parameters":{"options":{"systemMessage":"You are a helpful assistant who can answer questions about KAMI NFTs via the tools."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[480,-368],"id":"650596ad-f516-4d5a-ab3d-9be4b6e4a5e3","name":"AI Agent1"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatDeepSeek","typeVersion":1,"position":[368,-144],"id":"6846b716-9e82-482e-9da6-a838f74282fa","name":"DeepSeek Chat Model1","credentials":{"deepSeekApi":{"id":"kjsLLud72Mv0JDPq","name":"DeepSeek account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[512,-144],"id":"bf127dcf-4bf7-4934-b022-6f1ce2e76640","name":"Simple Memory"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5c9177df-4ef2-464f-b456-6acdbf7e0094","leftValue":"={{ $json.chatInput.toLowerCase() }}","rightValue":"kami","operator":{"type":"string","operation":"contains"}},{"id":"f6a0d4ac-b3a8-4ea4-b30d-ac2c89123b46","leftValue":"={{ $json.chatInput.toLowerCase() }}","rightValue":"nft","operator":{"type":"string","operation":"contains"}},{"id":"d1e2112c-2b76-47de-85f8-2f2fb3584706","leftValue":"={{ $json.chatInput.toLowerCase() }}","rightValue":"wallet","operator":{"type":"string","operation":"contains"}},{"id":"4a196f99-fc1a-4983-9c73-0b47ab85ea7e","leftValue":"={{ $json.chatInput.toLowerCase() }}","rightValue":"collection","operator":{"type":"string","operation":"contains"}}],"combinator":"or"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[0,116.572265625],"id":"c2de5716-b333-49d4-af32-e3badad7907f","name":"If"}],"connections":{"When chat message received":{"main":[[{"node":"If","type":"main","index":0}]]},"Postgres PGVector Store":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings Google Gemini":{"ai_embedding":[[{"node":"Postgres PGVector Store","type":"ai_embedding","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Call n8n Workflow Tool":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"DeepSeek Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[]]},"DeepSeek Chat Model1":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent1","type":"ai_memory","index":0}]]},"MCP Client":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"If":{"main":[[{"node":"AI Agent1","type":"main","index":0}],[{"node":"AI Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"44267869-f7e2-4bd0-8e24-7341f2dbd0f3","triggerCount":1,"shared":[{"createdAt":"2025-06-19T08:18:24.392Z","updatedAt":"2025-06-19T08:18:24.392Z","role":"workflow:owner","workflowId":"LP6fvqF8FhtnQCQM","projectId":"FvxAVPRgShLcnSOU"}],"tags":[{"createdAt":"2025-06-19T05:40:26.659Z","updatedAt":"2025-06-19T05:40:26.659Z","id":"CiHXrcv73HXsVpCY","name":"Sales"},{"createdAt":"2025-06-19T01:47:17.649Z","updatedAt":"2025-06-19T01:47:17.649Z","id":"ppfxkPZAqns7ciey","name":"Ocunapse"}]}